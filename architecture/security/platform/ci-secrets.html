<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>ci-secrets - StockEase Frontend Docs</title>
  <!-- Will be set to a repo-relative path at runtime -->
  <link rel="stylesheet" href="/frontend/templates/frontend-docs.css">
</head>
<body>
  <header>
    <div class="header-content">
      <a id="home-link" href="#" class="logo">üìö StockEase Frontend Docs</a>
      <nav class="nav-breadcrumb">
        <a id="home-crumb" href="#">Home</a> / <span id="breadcrumb">Documentation</span>
      </nav>
    </div>
  </header>

  <div class="container">
    <aside id="sidebar"></aside>
    <main>
      <div class="content">
        <h1 id="cicd-secrets--github-actions-security">CI/CD Secrets
        &amp; GitHub Actions Security</h1>
        <h2 id="overview">Overview</h2>
        <p>GitHub Actions workflows require secrets for deployment,
        Docker registries, and external services. This document covers
        secure secret management, OIDC authentication, and CI/CD
        pipeline security.</p>
        <hr />
        <h2 id="github-actions-secrets">GitHub Actions Secrets</h2>
        <h3 id="what-are-secrets">What are Secrets?</h3>
        <p>Secrets are encrypted environment variables that GitHub
        Actions can use without exposing values.</p>
        <p><strong>Key features:</strong></p>
        <ul>
        <li>Encrypted at rest and in transit</li>
        <li>Masked in logs (shown as <code>***</code>)</li>
        <li>Accessible only to workflow runs</li>
        <li>Cannot be accessed from outside GitHub</li>
        <li>Per-repository or per-organization</li>
        </ul>
        <h3 id="creating-secrets">Creating Secrets</h3>
        <p><strong>Step 1: Go to Repository Settings</strong></p>
        <ol type="1">
        <li>Repository ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions</li>
        <li>Click "New repository secret"</li>
        <li>Name: <code>FRONTEND_API_BASE_URL</code></li>
        <li>Value: <code>https://api.stockease.com</code></li>
        <li>Click "Add secret"</li>
        </ol>
        <p><strong>Step 2: Use in Workflow</strong></p>
        <div class="sourceCode" id="cb1"><pre
        class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># .github/workflows/deploy.yml</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">VITE_API_BASE_URL</span><span class="kw">:</span><span class="at"> ${{ secrets.FRONTEND_API_BASE_URL }}</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> npm run build</span></span></code></pre></div>
        <h3 id="secret-naming-conventions">Secret Naming
        Conventions</h3>
        <p><strong>Recommended pattern:</strong></p>
        <pre><code>ENVIRONMENT_SERVICE_TYPE

Examples:
- FRONTEND_API_BASE_URL    (Frontend, API, URL)
- DOCKER_USERNAME          (Docker, Registry, Username)
- DOCKER_PASSWORD          (Docker, Registry, Password)
- DEPLOY_SSH_KEY           (Deployment, SSH, Key)
- DEPLOY_HOST              (Deployment, Host)</code></pre>
        <h3 id="organization-secrets">Organization Secrets</h3>
        <p><strong>For shared secrets across repos:</strong></p>
        <ol type="1">
        <li>Organization Settings ‚Üí Secrets and variables ‚Üí Actions</li>
        <li>Create secret once</li>
        <li>Accessible to all repos in organization</li>
        <li>Control which repos can access</li>
        </ol>
        <hr />
        <h2 id="current-secrets-in-stockease">Current Secrets in
        StockEase</h2>
        <h3 id="required-secrets">Required Secrets</h3>
        <p><strong>1. FRONTEND_API_BASE_URL</strong></p>
        <ul>
        <li><strong>Purpose:</strong> Production API endpoint</li>
        <li><strong>Example:</strong>
        <code>https://api.stockease.com</code></li>
        <li><strong>Used in:</strong> Build stage (Vite
        replacement)</li>
        <li><strong>Sensitivity:</strong> Low (endpoint is public)</li>
        </ul>
        <p><strong>2. DOCKER_USERNAME</strong></p>
        <ul>
        <li><strong>Purpose:</strong> Docker registry login</li>
        <li><strong>Example:</strong>
        <code>my-dockerhub-username</code></li>
        <li><strong>Used in:</strong> Docker build/push</li>
        <li><strong>Sensitivity:</strong> Medium</li>
        </ul>
        <p><strong>3. DOCKER_PASSWORD</strong></p>
        <ul>
        <li><strong>Purpose:</strong> Docker registry
        token/password</li>
        <li><strong>Example:</strong> <code>dckr_pat_xxxxx</code></li>
        <li><strong>Used in:</strong> Docker login</li>
        <li><strong>Sensitivity:</strong> üî¥ Critical (do not
        share)</li>
        </ul>
        <p><strong>4. VERCEL_TOKEN</strong> (if using Vercel)</p>
        <ul>
        <li><strong>Purpose:</strong> Vercel deployment
        authentication</li>
        <li><strong>Example:</strong>
        <code>vercel_xxxxxxxxxxxxxxxx</code></li>
        <li><strong>Used in:</strong> Vercel deploy step</li>
        <li><strong>Sensitivity:</strong> üî¥ Critical</li>
        </ul>
        <h3 id="optional-secrets">Optional Secrets</h3>
        <p><strong>DEPLOY_SSH_KEY</strong> (if using SSH deployment)</p>
        <ul>
        <li>Private SSH key for server access</li>
        <li>Sensitivity: üî¥ Critical</li>
        </ul>
        <p><strong>DEPLOY_HOST</strong></p>
        <ul>
        <li>Server IP or hostname</li>
        <li>Sensitivity: Low</li>
        </ul>
        <p><strong>DEPLOY_USER</strong></p>
        <ul>
        <li>SSH username</li>
        <li>Sensitivity: Low</li>
        </ul>
        <hr />
        <h2 id="secure-secret-handling">Secure Secret Handling</h2>
        <h3 id="-safe-practices">‚úÖ Safe Practices</h3>
        <p><strong>Masking in Logs:</strong></p>
        <div class="sourceCode" id="cb3"><pre
        class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">DOCKER_PASSWORD</span><span class="kw">:</span><span class="at"> ${{ secrets.DOCKER_PASSWORD }}</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">  run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    # Secret is automatically masked</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    docker login -u user -p $DOCKER_PASSWORD</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    # Output shows: docker login -u user -p ***</span></code></pre></div>
        <p><strong>Using in Scripts:</strong></p>
        <div class="sourceCode" id="cb4"><pre
        class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Deploy</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">API_KEY</span><span class="kw">:</span><span class="at"> ${{ secrets.API_KEY }}</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">  run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    # Secret available as environment variable</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    # Automatically masked in logs</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    curl -H &quot;X-API-Key: $API_KEY&quot; https://api.example.com</span></code></pre></div>
        <h3 id="-dangerous-practices">‚ùå Dangerous Practices</h3>
        <p><strong>Don't echo secrets:</strong></p>
        <div class="sourceCode" id="cb5"><pre
        class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ‚ùå WRONG (secrets printed to log)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">run</span><span class="kw">:</span><span class="at"> echo &quot;Secret is: ${{ secrets.MY_SECRET }}&quot;</span></span></code></pre></div>
        <p><strong>Don't save to files (unless encrypted):</strong></p>
        <div class="sourceCode" id="cb6"><pre
        class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ‚ùå WRONG (secret written to file in logs)</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">run</span><span class="kw">:</span><span class="at"> echo ${{ secrets.MY_SECRET }} &gt; ~/.ssh/key</span></span></code></pre></div>
        <p><strong>Don't pass through stdout:</strong></p>
        <div class="sourceCode" id="cb7"><pre
        class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ‚ùå WRONG (secret visible in output)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">run</span><span class="kw">:</span><span class="at"> some-command &quot;${{ secrets.MY_SECRET }}&quot; 2&gt;&amp;1</span></span></code></pre></div>
        <p><strong>Don't add to environment variables without
        reason:</strong></p>
        <div class="sourceCode" id="cb8"><pre
        class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ‚ùå WRONG (all env vars logged)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">EVERYTHING</span><span class="kw">:</span><span class="at"> ${{ toJson(secrets) }}</span></span></code></pre></div>
        <hr />
        <h2 id="oidc-openid-connect-authentication">OIDC (OpenID
        Connect) Authentication</h2>
        <h3 id="what-is-oidc">What is OIDC?</h3>
        <p>OIDC is a modern alternative to static API tokens:</p>
        <ul>
        <li><strong>No static secrets stored</strong> (reduces
        compromise risk)</li>
        <li><strong>Temporary credentials</strong> (short-lived)</li>
        <li><strong>Per-workflow authentication</strong> (least
        privilege)</li>
        <li><strong>Auditability</strong> (tracks which workflow used
        credentials)</li>
        </ul>
        <h3 id="how-oidc-works">How OIDC Works</h3>
        <pre><code>GitHub Actions Workflow
  ‚Üì
Request OIDC token from GitHub
  ‚Üì
GitHub issues short-lived OIDC token
  ‚Üì
Workflow exchanges OIDC token for AWS/cloud credentials
  ‚Üì
Cloud provider validates GitHub&#39;s signature
  ‚Üì
Temporary credentials issued (15 minutes)
  ‚Üì
Workflow uses credentials for deployment
  ‚Üì
Credentials automatically expire</code></pre>
        <h3 id="oidc-benefits">OIDC Benefits</h3>
        <p>‚úÖ <strong>No Static Secrets</strong></p>
        <ul>
        <li>No token/password stored in GitHub</li>
        <li>No risk of token compromise</li>
        <li>No token rotation needed</li>
        </ul>
        <p>‚úÖ <strong>Short-lived Credentials</strong></p>
        <ul>
        <li>Auto-expire after 15 minutes</li>
        <li>Limits damage if leaked</li>
        <li>Smaller window for exploitation</li>
        </ul>
        <p>‚úÖ <strong>Per-Workflow Audit Trail</strong></p>
        <ul>
        <li>Track which workflow used credentials</li>
        <li>When and for how long</li>
        <li>Compliance-friendly</li>
        </ul>
        <p>‚úÖ <strong>Least Privilege</strong></p>
        <ul>
        <li>Grant specific permissions per workflow</li>
        <li>Only what's needed for that deployment</li>
        <li>Reduce blast radius</li>
        </ul>
        <h3 id="implementing-oidc-aws-example">Implementing OIDC (AWS
        Example)</h3>
        <p><strong>Step 1: Trust GitHub in AWS IAM</strong></p>
        <div class="sourceCode" id="cb10"><pre
        class="sourceCode json"><code class="sourceCode json"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Version&quot;</span><span class="fu">:</span> <span class="st">&quot;2012-10-17&quot;</span><span class="fu">,</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Statement&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Effect&quot;</span><span class="fu">:</span> <span class="st">&quot;Allow&quot;</span><span class="fu">,</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Principal&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;Federated&quot;</span><span class="fu">:</span> <span class="st">&quot;arn:aws:iam::ACCOUNT-ID:oidc-provider/token.actions.githubusercontent.com&quot;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Action&quot;</span><span class="fu">:</span> <span class="st">&quot;sts:AssumeRoleWithWebIdentity&quot;</span><span class="fu">,</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Condition&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;StringEquals&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;token.actions.githubusercontent.com:aud&quot;</span><span class="fu">:</span> <span class="st">&quot;sts.amazonaws.com&quot;</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">},</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;StringLike&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;token.actions.githubusercontent.com:sub&quot;</span><span class="fu">:</span> <span class="st">&quot;repo:Keglev/stockease-frontend:*&quot;</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
        <p><strong>Step 2: Workflow Configuration</strong></p>
        <div class="sourceCode" id="cb11"><pre
        class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Deploy with OIDC</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">permissions</span><span class="kw">:</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">id-token</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">contents</span><span class="kw">:</span><span class="at"> read</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">deploy</span><span class="kw">:</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Configure AWS credentials</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> aws-actions/configure-aws-credentials@v4</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">role-to-assume</span><span class="kw">:</span><span class="at"> arn:aws:iam::ACCOUNT-ID:role/GithubActionsRole</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">aws-region</span><span class="kw">:</span><span class="at"> us-east-1</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Deploy to S3</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> aws s3 sync dist/ s3://my-bucket/</span></span></code></pre></div>
        <h3 id="oidc-vs-static-secrets">OIDC vs Static Secrets</h3>
        <table>
        <thead>
        <tr class="header">
        <th>Aspect</th>
        <th>OIDC</th>
        <th>Static Secrets</th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td>Rotation</td>
        <td>Automatic</td>
        <td>Manual</td>
        </tr>
        <tr class="even">
        <td>Storage</td>
        <td>None</td>
        <td>GitHub</td>
        </tr>
        <tr class="odd">
        <td>Lifetime</td>
        <td>15 minutes</td>
        <td>Until revoked</td>
        </tr>
        <tr class="even">
        <td>Audit Trail</td>
        <td>Per workflow</td>
        <td>General</td>
        </tr>
        <tr class="odd">
        <td>Complexity</td>
        <td>Higher</td>
        <td>Lower</td>
        </tr>
        <tr class="even">
        <td>Security</td>
        <td>Better</td>
        <td>Good</td>
        </tr>
        </tbody>
        </table>
        <hr />
        <h2 id="secret-rotation">Secret Rotation</h2>
        <h3 id="when-to-rotate">When to Rotate</h3>
        <p>üî¥ <strong>Immediately:</strong></p>
        <ul>
        <li>Secret compromised</li>
        <li>Employee departure</li>
        <li>Credential leak detected</li>
        <li>Suspicious activity</li>
        </ul>
        <p>üü° <strong>Regularly:</strong></p>
        <ul>
        <li>Monthly (best practice)</li>
        <li>Quarterly (minimum)</li>
        <li>After major incidents</li>
        </ul>
        <h3 id="rotation-process">Rotation Process</h3>
        <p><strong>Step 1: Generate New Secret</strong></p>
        <div class="sourceCode" id="cb12"><pre
        class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For API keys</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">openssl</span> rand <span class="at">-base64</span> 32</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># For SSH keys</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh-keygen</span> <span class="at">-t</span> rsa <span class="at">-b</span> 4096 <span class="at">-f</span> new_key <span class="at">-N</span> <span class="st">&quot;&quot;</span></span></code></pre></div>
        <p><strong>Step 2: Update in GitHub</strong></p>
        <ol type="1">
        <li>Settings ‚Üí Secrets</li>
        <li>Edit secret</li>
        <li>Enter new value</li>
        <li>Click "Update secret"</li>
        </ol>
        <p><strong>Step 3: Update in External Service</strong></p>
        <div class="sourceCode" id="cb13"><pre
        class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Docker Hub</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> logout</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> login  <span class="co"># Use new token</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># AWS</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> configure  <span class="co"># Set new credentials</span></span></code></pre></div>
        <p><strong>Step 4: Verify Workflow Still Works</strong></p>
        <div class="sourceCode" id="cb14"><pre
        class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trigger manual workflow run</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify deployment succeeds</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Check logs show successful authentication</span></span></code></pre></div>
        <p><strong>Step 5: Document Change</strong></p>
        <div class="sourceCode" id="cb15"><pre
        class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="an">2025-11-13:</span><span class="co"> Rotated DOCKER_PASSWORD</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="an">2025-11-13:</span><span class="co"> Rotated VERCEL_TOKEN</span></span></code></pre></div>
        <hr />
        <h2 id="secret-scanning--leak-detection">Secret Scanning &amp;
        Leak Detection</h2>
        <h3 id="github-secret-scanning">GitHub Secret Scanning</h3>
        <p>GitHub automatically scans for exposed secrets:</p>
        <p><strong>What it detects:</strong></p>
        <ul>
        <li>GitHub tokens</li>
        <li>AWS credentials</li>
        <li>Docker tokens</li>
        <li>Private keys</li>
        <li>API keys (various services)</li>
        </ul>
        <p><strong>When it triggers:</strong></p>
        <ul>
        <li>Commit pushed to repo</li>
        <li>PR created</li>
        <li>Code review</li>
        </ul>
        <p><strong>Notifications:</strong></p>
        <ul>
        <li>Repository maintainer notified</li>
        <li>Alert in Security tab</li>
        <li>Can dismiss (if false positive)</li>
        </ul>
        <h3 id="preventing-accidental-leaks">Preventing Accidental
        Leaks</h3>
        <p><strong>1. Pre-commit Hook</strong></p>
        <div class="sourceCode" id="cb16"><pre
        class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># .git/hooks/pre-commit</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="fu">git</span> diff <span class="at">--cached</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-i</span> <span class="st">&quot;password\|secret\|token\|api_key&quot;</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">echo</span> <span class="st">&quot;‚ùå ERROR: Possible secret in commit&quot;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="bu">exit</span> 1</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span></code></pre></div>
        <p><strong>2. .gitignore</strong></p>
        <div class="sourceCode" id="cb17"><pre
        class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude sensitive files</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ex">.env.local</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="ex">.env.*.local</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="ex">*.key</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="ex">*.pem</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="ex">deploy_key</span></span></code></pre></div>
        <p><strong>3. Audit Before Commit</strong></p>
        <div class="sourceCode" id="cb18"><pre
        class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View staged changes</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> diff <span class="at">--cached</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for sensitive patterns</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> diff <span class="at">--cached</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="st">&quot;password|secret|token|api_key&quot;</span></span></code></pre></div>
        <h3 id="if-secret-leaked">If Secret Leaked</h3>
        <p><strong>1. Revoke Immediately</strong></p>
        <div class="sourceCode" id="cb19"><pre
        class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For GitHub token</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Settings ‚Üí Developer settings ‚Üí Personal access tokens</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Click &quot;Delete&quot;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># For API keys</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Service console ‚Üí API Keys ‚Üí Revoke</span></span></code></pre></div>
        <p><strong>2. Create New Secret</strong></p>
        <div class="sourceCode" id="cb20"><pre
        class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate new credentials</span></span></code></pre></div>
        <p><strong>3. Update in GitHub</strong></p>
        <div class="sourceCode" id="cb21"><pre
        class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Settings ‚Üí Secrets and variables ‚Üí Actions</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit secret with new value</span></span></code></pre></div>
        <p><strong>4. Check Logs</strong></p>
        <div class="sourceCode" id="cb22"><pre
        class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify no unauthorized access</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check deployment logs</span></span></code></pre></div>
        <p><strong>5. Document Incident</strong></p>
        <div class="sourceCode" id="cb23"><pre
        class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="an">INCIDENT:</span><span class="co"> Secret leaked in commit abc123</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Revoked: DOCKER_PASSWORD</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Created: New Docker token</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Updated: GitHub secret</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Time to fix: 5 minutes</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Impact: None (caught immediately)</span></code></pre></div>
        <hr />
        <h2 id="workflow-security-best-practices">Workflow Security Best
        Practices</h2>
        <h3 id="-do">‚úÖ DO:</h3>
        <ul>
        <li>‚úÖ Use secrets for all sensitive data</li>
        <li>‚úÖ Rotate secrets regularly (monthly)</li>
        <li>‚úÖ Audit secret usage</li>
        <li>‚úÖ Use OIDC when possible</li>
        <li>‚úÖ Enable branch protection</li>
        <li>‚úÖ Require PR reviews before deployment</li>
        <li>‚úÖ Log all deployments</li>
        <li>‚úÖ Limit secret access to needed workflows</li>
        <li>‚úÖ Monitor failed workflow runs</li>
        </ul>
        <h3 id="-dont">‚ùå DON'T:</h3>
        <ul>
        <li>‚ùå Hardcode secrets in YAML</li>
        <li>‚ùå Echo secrets to logs</li>
        <li>‚ùå Store secrets locally without encryption</li>
        <li>‚ùå Share secrets via email/chat</li>
        <li>‚ùå Use personal access tokens (use OIDC instead)</li>
        <li>‚ùå Keep old secrets after rotation</li>
        <li>‚ùå Allow unreviewed deploys</li>
        <li>‚ùå Grant secrets to unnecessary workflows</li>
        <li>‚ùå Ignore security alerts</li>
        </ul>
        <hr />
        <h2 id="workflow-configuration">Workflow Configuration</h2>
        <h3 id="basic-workflow">Basic Workflow</h3>
        <div class="sourceCode" id="cb24"><pre
        class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Deploy Frontend</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at"> master</span><span class="kw">,</span><span class="at"> main </span><span class="kw">]</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">deploy</span><span class="kw">:</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">permissions</span><span class="kw">:</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">id-token</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">contents</span><span class="kw">:</span><span class="at"> read</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup Node</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-node@v4</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">node-version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;18&#39;</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">cache</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;npm&#39;</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">VITE_API_BASE_URL</span><span class="kw">:</span><span class="at"> ${{ secrets.FRONTEND_API_BASE_URL }}</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> npm run build</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a><span class="at">      </span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Deploy</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">VERCEL_TOKEN</span><span class="kw">:</span><span class="at"> ${{ secrets.VERCEL_TOKEN }}</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> npx vercel deploy --prod --token $VERCEL_TOKEN</span></span></code></pre></div>
        <h3 id="with-docker">With Docker</h3>
        <div class="sourceCode" id="cb25"><pre
        class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Login to Docker</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> docker/login-action@v3</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">username</span><span class="kw">:</span><span class="at"> ${{ secrets.DOCKER_USERNAME }}</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">password</span><span class="kw">:</span><span class="at"> ${{ secrets.DOCKER_PASSWORD }}</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build and push</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> docker/build-push-action@v5</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">push</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">tags</span><span class="kw">:</span><span class="at"> myregistry/myimage:latest</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="fu">    build-args</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>      VITE_API_BASE_URL=${{ secrets.FRONTEND_API_BASE_URL }}</span></code></pre></div>
        <hr />
        <h2 id="troubleshooting">Troubleshooting</h2>
        <h3 id="issue-secret-not-available-in-workflow">Issue: Secret
        Not Available in Workflow</h3>
        <p><strong>Symptom:</strong></p>
        <pre><code>Error: FRONTEND_API_BASE_URL is empty</code></pre>
        <p><strong>Causes:</strong></p>
        <ul>
        <li>Secret name misspelled (case-sensitive)</li>
        <li>Secret not created in this repository</li>
        <li>Workflow doesn't have permission</li>
        </ul>
        <p><strong>Solution:</strong></p>
        <div class="sourceCode" id="cb27"><pre
        class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify secret exists</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Settings ‚Üí Secrets and variables ‚Üí Actions</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Check name matches exactly: FRONTEND_API_BASE_URL</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify syntax in workflow</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Should be: ${{ secrets.FRONTEND_API_BASE_URL }}</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Not: $FRONTEND_API_BASE_URL or ${FRONTEND_API_BASE_URL}</span></span></code></pre></div>
        <h3 id="issue-secret-visible-in-logs">Issue: Secret Visible in
        Logs</h3>
        <p><strong>Symptom:</strong></p>
        <pre><code>Step logs show: docker login -u user -p dckr_pat_xxxxx</code></pre>
        <p><strong>Causes:</strong></p>
        <ul>
        <li>Secret printed directly</li>
        <li>Saved to file and file displayed</li>
        <li>Passed through stdout</li>
        </ul>
        <p><strong>Solution:</strong></p>
        <div class="sourceCode" id="cb29"><pre
        class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ‚úÖ Correct: Use official actions that handle secrets</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> docker/login-action@v3</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">username</span><span class="kw">:</span><span class="at"> ${{ secrets.DOCKER_USERNAME }}</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">password</span><span class="kw">:</span><span class="at"> ${{ secrets.DOCKER_PASSWORD }}</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ‚ùå Wrong: Manual login</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="fu">run</span><span class="kw">:</span><span class="at"> docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}</span></span></code></pre></div>
        <h3 id="issue-cant-access-secret-from-organization">Issue: Can't
        Access Secret from Organization</h3>
        <p><strong>Symptom:</strong></p>
        <pre><code>Error: Secret DEPLOY_SSH_KEY is not available</code></pre>
        <p><strong>Cause:</strong></p>
        <ul>
        <li>Organization secret not shared with repository</li>
        </ul>
        <p><strong>Solution:</strong></p>
        <ol type="1">
        <li>Organization Settings ‚Üí Secrets and variables ‚Üí Actions</li>
        <li>Click on organization secret</li>
        <li>Under "Repository access" ‚Üí Add repository</li>
        <li>Select stockease-frontend repo</li>
        </ol>
        <hr />
        <h2 id="related-files">Related Files</h2>
        <ul>
        <li><strong>Main Workflow:</strong>
        <code>.github/workflows/deploy-frontend.yml</code></li>
        <li><strong>Secrets Management:</strong> Settings ‚Üí Secrets and
        variables ‚Üí Actions</li>
        <li><strong>Dependencies:</strong> See <a
        href="./dependencies.html">Dependency Management</a></li>
        <li><strong>Headers:</strong> See <a
        href="./headers-and-nginx.html">Headers &amp; nginx
        Security</a></li>
        </ul>
        <hr />
        <h2 id="references">References</h2>
        <ul>
        <li><a
        href="https://docs.github.com/en/actions/security-guides/using-secrets-in-github-actions">GitHub
        Actions Secrets</a></li>
        <li><a
        href="https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect">GitHub
        OIDC Provider</a></li>
        <li><a
        href="https://docs.github.com/en/code-security/secret-scanning/about-secret-scanning">GitHub
        Secret Scanning</a></li>
        </ul>
        <hr />
        <p><strong>Last Updated:</strong> November 13, 2025<br />
        <strong>Status:</strong> Production-Ready<br />
        <strong>Priority:</strong> Critical (Prevents credential
        compromise)</p>
      </div>
    </main>
  </div>

  <footer>
    <div class="footer-content">
      <p><strong>StockEase</strong> - Inventory Management System</p>
      <p>Architecture Documentation | Frontend</p>
      <p style="opacity:.7;font-size:.85rem;">¬© 2025 Team StockEase. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Absolute base for the site on GitHub Pages
    const BASE = '/frontend/';

    // Sidebar (frontend-focused). Keep hrefs relative to 'architecture/' except where absolute noted.
    const navigation = {
      'Frontend Docs': [
        { label: 'Landing', href: 'index.html', isRoot: true },
        { label: 'Architecture Index', href: 'index.html' },
        { label: 'Overview', href: 'overview.html' },
        { label: '√úbersicht (Deutsch)', href: 'overview.de.html' },
        { label: 'Docs Pipeline', href: 'docs-pipeline/overview.html' },
        { label: 'Production Pipeline', href: 'pipeline/overview.html' },
      ],
      'Sections': [
        { label: 'API Layer', href: 'src/api/overview.html' },
        { label: 'Components', href: 'src/components/overview.html' },
        { label: 'Security', href: 'src/security/overview.html' },
        { label: 'Pages', href: 'src/pages/overview.html' },
        { label: 'Services', href: 'src/services/overview.html' },
        { label: 'Localization (i18n)', href: 'src/i18n/overview.html' },
        { label: 'Docker Setup', href: 'src/docker_structure/overview.html' },
        { label: 'Testing', href: 'src/tests/overview.html' },
      ],
      'Generated': [
        // Use absolute internal paths so they always resolve with CSS
        { label: 'TypeDoc (TS API)', href: '/frontend/typedoc/index.html', absolute: true },
        { label: 'Coverage (Vitest)', href: '/frontend/coverage/index.html', absolute: true },
      ],
      'Backend (external)': [
        { label: 'Backend Docs', href: 'https://keglev.github.io/stockease/', external: true },
        { label: 'Backend API (ReDoc)', href: 'https://keglev.github.io/stockease/api-docs.html', external: true },
        { label: 'Backend Coverage', href: 'https://keglev.github.io/stockease/coverage/', external: true },
      ],
    };

    // Set header links to the site root
    document.addEventListener('DOMContentLoaded', () => {
      const home = BASE + 'index.html';
      const homeLink = document.getElementById('home-link');
      const homeCrumb = document.getElementById('home-crumb');
      if (homeLink) homeLink.href = home;
      if (homeCrumb) homeCrumb.href = home;
    });

    function buildSidebar() {
      const sidebar = document.getElementById('sidebar');
      if (!sidebar) return;

      Object.entries(navigation).forEach(([section, links]) => {
        const block = document.createElement('div');
        block.className = 'nav-section';

        const title = document.createElement('div');
        title.className = 'nav-section-title';
        title.textContent = section;
        block.appendChild(title);

        const ul = document.createElement('ul');
        links.forEach(link => {
          const li = document.createElement('li');
          const a = document.createElement('a');

          if (link.external || link.absolute) {
            // external http(s) OR absolute internal '/frontend/...'
            a.href = link.href;
          } else if (link.isRoot) {
            a.href = BASE + 'index.html';
          } else if (link.isCoverage) {
            a.href = BASE + 'coverage/index.html';
          } else if (link.isApiDoc) {
            a.href = BASE + 'api-docs.html';
          } else {
            // default: architecture-relative
            a.href = BASE + 'architecture/' + link.href;
          }

          a.textContent = link.label;

          // Active-state highlight
          const current = window.location.pathname;
          const linkPath = a.pathname.replace(/\.html$/, '');
          if (current.endsWith(a.pathname) || current.includes(linkPath)) {
            a.className = 'active';
          }

          li.appendChild(a);
          ul.appendChild(li);
        });

        block.appendChild(ul);
        sidebar.appendChild(block);
      });
    }

    document.addEventListener('DOMContentLoaded', buildSidebar);
  </script>

  <!-- Mermaid.js for diagrams -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
      startOnLoad: false,
      theme: 'default',
      securityLevel: 'loose',
      fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
    });

    // Convert fenced code blocks emitted by Pandoc to <div class="mermaid"> sources
    const blocks = document.querySelectorAll('code.language-mermaid');
    blocks.forEach(code => {
      code.classList.remove('language-mermaid');
      code.classList.add('mermaid');
      if (code.parentElement.tagName === 'PRE') {
        code.parentElement.classList.add('mermaid-block');
      }
    });

    // Render all diagrams
    (document.readyState === 'loading'
      ? new Promise(r => document.addEventListener('DOMContentLoaded', r))
      : Promise.resolve()
    ).then(() => mermaid.run()).catch(err => console.error('Mermaid rendering error:', err));
  </script>
</body>
</html>
